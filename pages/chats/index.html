<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‚ú® Relay - Chat</title>
    <link rel="stylesheet" href="../../style.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- ==================== -->
    <!-- CHAT HEADER SECTION  -->
    <!-- ==================== -->
    <header class="chat-header">
        <button class="back-btn" onclick="goBack()">‚Üê</button>
        <div class="chat-user-info">
            <div class="chat-user-avatar" id="chatUserAvatar">F</div>
            <div class="chat-user-details">
                <h3 id="chatUserName">Friend Name</h3>
                <div class="chat-user-status">
                    <span class="status-dot" id="statusDot"></span>
                    <span id="statusText">Online</span>
                </div>
            </div>
        </div>
        <div class="chat-actions">
            <button class="chat-action-btn" onclick="showUserInfo()" title="User Info">‚ìò</button>
            <button class="chat-action-btn" onclick="clearChatPrompt()" title="Clear Chat">üóëÔ∏è</button>
        </div>
    </header>

    <!-- ==================== -->
    <!-- MAIN CONTENT SECTION -->
    <!-- ==================== -->
    <main class="main-content" id="mainContent">
        <div class="messages-container" id="messagesContainer">
            <!-- Messages loaded by JavaScript -->
        </div>
    </main>

    <!-- ==================== -->
    <!-- COLOR PICKER WILL BE INJECTED HERE -->
    <!-- ==================== -->

    <!-- ==================== -->
    <!-- MESSAGE INPUT        -->
    <!-- ==================== -->
    <div class="message-input-wrapper" id="messageInputWrapper">
        <div class="message-input-container">
            <textarea class="message-input" id="messageInput" 
                      placeholder="Type a message..." 
                      rows="1"
                      onkeydown="handleKeyPress(event)"
                      oninput="autoResize(this)"></textarea>
            <button class="send-btn" id="sendBtn" onclick="sendMessage()" disabled>‚û§</button>
        </div>
    </div>

    <!-- ==================== -->
    <!-- ALERT SYSTEM         -->
    <!-- ==================== -->
    <div class="custom-alert-overlay" id="customAlert" style="display: none;">
        <div class="custom-alert">
            <div class="custom-alert-icon" id="alertIcon">‚ö†Ô∏è</div>
            <h3 class="custom-alert-title" id="alertTitle"></h3>
            <p class="custom-alert-message" id="alertMessage"></p>
            <div class="custom-alert-buttons">
                <button class="alert-btn confirm" id="alertConfirm">OK</button>
                <button class="alert-btn cancel" id="alertCancel" style="display: none;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- ==================== -->
    <!-- TOAST NOTIFICATION   -->
    <!-- ==================== -->
    <div class="custom-toast" id="customToast" style="display: none;">
        <span class="toast-icon" id="toastIcon">‚ÑπÔ∏è</span>
        <span class="toast-message" id="toastMessage"></span>
    </div>

    <!-- ==================== -->
    <!-- USER INFO MODAL      -->
    <!-- ==================== -->
    <div class="modal-overlay" id="userInfoModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">User Info</h2>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div id="userInfoContent"></div>
        </div>
    </div>

    <script type="module" src="script.js"></script>
    <script src="/utils/sw-manager.js"></script>
</body>
</html>